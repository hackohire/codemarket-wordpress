jQuery(document).ready(function(e){if(e("#commission-payouts").submit(function(){return!!confirm(eddc_vars.confirm_payout)}),e(".edd_datepicker").length>0){var t="mm/dd/yy";e(".edd_datepicker").datepicker({dateFormat:t})}e(".eddc-commissions-export-toggle").click(function(){e(".eddc-commissions-export-toggle").toggle(),e("#eddc-export-commissions").toggle()}),e("body").on("click",".eddc-download-payout-file",function(){e(this).attr("disabled","disabled"),e("#eddc-export-commissions").hide(),e("#eddc-export-commissions-mark-as-paid").show(),window.scrollTo(0,0)}),e("#edd_commisions_enabled").change(function(){var t=e(this).is(":checked"),d=e(".eddc_toggled_row");t?(e(".edd_repeatable_row").find(".edd-select-chosen").css("width","300px"),d.show()):d.hide()}),e("#edd_download_commissions").on("click",function(){if(!e("#edd_download_commissions").hasClass("closed")){var t=e("#edd_commisions_enabled").is(":checked"),d=e(".eddc_toggled_row");t?(e(".edd_repeatable_row").find(".edd-select-chosen").css("width","300px"),d.show()):d.hide()}}),e('.eddc-add-commission input[name="type"]').on("change",function(){var t=e(this).val(),d=e("#eddc-add-rate-row");"percentage"===t?d.find("input").prop("disabled",""):d.find("input").prop("disabled","disabled")});var d={init:function(){this.add(),this.remove()},clone_repeatable:function(t){var d=highest=1;return t.parent().find("tr.edd_repeatable_row").each(function(){var t=e(this).data("key");parseInt(t)>highest&&(highest=t)}),d=highest+=1,clone=t.clone(),clone.find("select").each(function(){e(this).val(t.find('select[name="'+e(this).attr("name")+'"]').val())}),clone.removeClass("edd_add_blank"),clone.attr("data-key",d),clone.find("td input, td select, textarea").val(""),clone.find("input, select, textarea").each(function(){var t=e(this).attr("name"),n=e(this).attr("id");t&&(t=t.replace(/\[(\d+)\]/,"["+parseInt(d)+"]"),e(this).attr("name",t)),e(this).attr("data-key",d),"undefined"!=typeof n&&(n=n.replace(/(\d+)/,parseInt(d)),e(this).attr("id",n))}),clone.find("span.edd_price_id").each(function(){e(this).text(parseInt(d))}),clone.find("span.edd_file_id").each(function(){e(this).text(parseInt(d))}),clone.find(".edd_repeatable_default_input").each(function(){e(this).val(parseInt(d)).removeAttr("checked")}),clone.find(".edd_repeatable_condition_field").each(function(){e(this).find("option:eq(0)").prop("selected","selected")}),clone.find(".search-choice").remove(),clone.find(".chosen-container").remove(),clone},add:function(){e(document.body).on("click",".submit .edd_commission_rates_add_repeatable",function(t){t.preventDefault();var n=e(this),i=n.parent().parent().prev("tr"),o=d.clone_repeatable(i);o.insertAfter(i).find("input, textarea, select").filter(":visible").eq(0).focus(),o.find(".edd-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:edd_vars.one_option,placeholder_text_multiple:edd_vars.one_or_more_option}),o.find(".edd-select-chosen").css("width","300px")})},remove:function(){e(document.body).on("click",".edd_commissions_remove_repeatable",function(t){t.preventDefault();var d,n,i,o=e(this).parent().parent("tr"),c=o.parent().find("tr").length-1,s="tr.edd_repeatable_commissions";d=e(this).is(".ui-sortable tr:first-child .edd_remove_repeatable:first-child")?o.next("tr"):o.prev("tr"),n=d.find("select, input, textarea, button").filter(":visible"),i=n.eq(0),c>1?(e("input, select",o).val(""),o.fadeOut("fast").remove(),i.focus()):alert(edd_vars.one_field_min),e(s).each(function(t){e(this).data("key",t),e(this).find("input, select").each(function(){var d=e(this).attr("name");"undefined"!=typeof d&&(d=d.replace(/\[(\d+)\]/,"["+t+"]"),e(this).attr("name",d).attr("id",d))})})})}};d.init(),e("#eddc-commission-delete-comfirm").change(function(){var t=e("#eddc-delete-commission");e(this).prop("checked")?t.attr("disabled",!1):t.attr("disabled",!0)}),e(".eddc-edit-commission").on("click",function(t){t.preventDefault();var d=e(this);d.text()===eddc_vars.action_edit?d.text(eddc_vars.action_cancel):(e("#eddc_update_commission").fadeOut("fast",function(){e(this).css("display","none")}),d.text(eddc_vars.action_edit)),e("#eddc_user_chosen").toggle(),e("#eddc_download_chosen").toggle(),e(".eddc-commission-rate").toggle(),e(".eddc-commission-amount").toggle()}),e(".eddc-commission-user").on("change",function(){e("#eddc_update_commission").fadeIn("fast").css("display","inline-block")}),e(".eddc-commission-download").on("change",function(){e("#eddc_update_commission").fadeIn("fast").css("display","inline-block")}),e(".eddc-commission-rate").on("change",function(){e("#eddc_update_commission").fadeIn("fast").css("display","inline-block")}),e(".eddc-commission-amount").on("change",function(){e("#eddc_update_commission").fadeIn("fast").css("display","inline-block")})});
